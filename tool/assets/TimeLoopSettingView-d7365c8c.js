import{u as B}from"./time-08e9ca37.js";import{A as H,B as W,C as J,D as w,E as K,a as t,G as M,H as Q,f as L,q as p,h as U,r as i,o as g,c as D,w as a,z as y,I as R,J as X,v as b,_ as Y,s as T,F as x,K as Z,u as h}from"./index-b667e11a.js";function ee(){const n=W({show:!1}),e=r=>{n.show=r},l=r=>{w(n,r,{transitionAppear:!0}),e(!0)},u=()=>e(!1);return J({open:l,close:u,toggle:e}),{open:l,close:u,state:n,toggle:e}}function oe(n){const e=H(n),l=document.createElement("div");return document.body.appendChild(l),{instance:e.mount(l),unmount(){e.unmount(),document.body.removeChild(l)}}}let S;const te={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let le=w({},te);function ae(){({instance:S}=oe({setup(){const{state:e,toggle:l}=ee();return()=>t(Q,M(e,{"onUpdate:show":l}),null)}}))}function P(n){return K?new Promise((e,l)=>{S||ae(),S.open(w({},le,n,{callback:u=>{(u==="confirm"?e:l)(u)}}))}):Promise.resolve()}const ne=n=>P(w({showCancelButton:!0},n)),se={style:{margin:"16px"}},ue=L({__name:"TimeLoopSettingViewItem",props:{data:{}},setup(n){const e=n,l=B(),u=p(""),r=p(5),m=p(20),c=p(2),d=p(""),V=v=>v&&/^[0-9]+$/.test(v)&&Number.isFinite(+v)?!0:"请输入正整数",A=()=>{l.updateLoopSets({id:e.data.id,title:u.value,loopTime:r.value,loopTimes:m.value,loopGapTime:c.value})},I=()=>{ne({message:"确认删除吗？"}).then(()=>{l.delLoopSets(e.data.id)}).catch(()=>{})},N=()=>{l.setSelectedLoopSets(e.data.id)||P({message:"请先提交！"})},_=p(!1),O=[{text:"long-1",value:"./audios/long-1.mp3"},{text:"long-2",value:"./audios/long-2.mp3"},{text:"long-3",value:"./audios/long-3.mp3"},{text:"long-4",value:"./audios/long-4.mp3"},{text:"long-5",value:"./audios/long-5.mp3"},{text:"short-dida",value:"./audios/short-dida.mp3"},{text:"short-dududu",value:"./audios/short-dududu.mp3"},{text:"short-jiazigu",value:"./audios/short-jiazigu.mp3"}],q=({selectedOptions:v})=>{var o;d.value=(((o=v[0])==null?void 0:o.text)||"")+"",_.value=!1};return U(()=>e.data,()=>{u.value=e.data.title,r.value=e.data.loopTime,m.value=e.data.loopTimes,c.value=e.data.loopGapTime},{immediate:!0}),(v,o)=>{const f=i("van-field"),E=i("van-picker"),G=i("van-popup"),$=i("van-cell-group"),C=i("van-button"),k=i("van-col"),z=i("van-row"),F=i("van-form"),j=i("van-collapse-item");return g(),D(j,{name:e.data.id},{title:a(()=>[y("div",{class:R({selected:e.data.selected})},X(u.value),3)]),default:a(()=>[t(F,{onSubmit:A},{default:a(()=>[t($,{inset:""},{default:a(()=>[t(f,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),name:"title",label:"标题",placeholder:"标题",rules:[{required:!0,message:"标题"}]},null,8,["modelValue"]),t(f,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=s=>r.value=s),name:"loopTime",label:"循环时间",placeholder:"循环时间",rules:[{required:!0,message:"循环时间"},{validator:V}]},null,8,["modelValue","rules"]),t(f,{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=s=>m.value=s),name:"loopTimes",label:"循环次数",placeholder:"循环次数",rules:[{required:!0,message:"循环次数"},{validator:V}]},null,8,["modelValue","rules"]),t(f,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=s=>c.value=s),name:"loopGapTime",label:"循环间隙",placeholder:"循环间隙",rules:[{required:!0,message:"循环间隙"},{validator:V}]},null,8,["modelValue","rules"]),t(f,{modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=s=>d.value=s),"is-link":"",readonly:"",name:"picker",label:"选择器",placeholder:"点击选择城市",onClick:o[5]||(o[5]=s=>_.value=!0)},null,8,["modelValue"]),t(G,{show:_.value,"onUpdate:show":o[7]||(o[7]=s=>_.value=s),position:"bottom"},{default:a(()=>[t(E,{columns:O,onConfirm:q,onCancel:o[6]||(o[6]=s=>_.value=!1)})]),_:1},8,["show"])]),_:1}),y("div",se,[t(z,{justify:"space-around"},{default:a(()=>[t(k,{span:"8"},{default:a(()=>[t(C,{round:"",block:"",type:"primary","native-type":"submit"},{default:a(()=>[b(" 提交 ")]),_:1})]),_:1}),t(k,{span:"8"},{default:a(()=>[t(C,{round:"",block:"",type:"success",onClick:N},{default:a(()=>[b(" 激活 ")]),_:1})]),_:1}),t(k,{span:"8"},{default:a(()=>[t(C,{round:"",block:"",type:"warning",onClick:I},{default:a(()=>[b(" 删除 ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["name"])}}});const re=Y(ue,[["__scopeId","data-v-9e96a03b"]]),ie={style:{margin:"16px"}},me=L({__name:"TimeLoopSettingView",setup(n){const e=B();U(()=>e.loopSets,()=>{console.log("loopSets",e.loopSets)});const l=p("");return(u,r)=>{const m=i("van-collapse"),c=i("van-button");return g(),T(x,null,[t(m,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=d=>l.value=d),contenteditable:"contenteditable",accordion:""},{default:a(()=>[(g(!0),T(x,null,Z(h(e).loopSets,d=>(g(),D(re,{key:d.id,data:d},null,8,["data"]))),128))]),_:1},8,["modelValue"]),y("div",ie,[t(c,{round:"",block:"",type:"primary",onClick:h(e).addLoopSets},{default:a(()=>[b(" 新增 ")]),_:1},8,["onClick"])])],64)}}});export{me as default};
