(self.webpackChunk=self.webpackChunk||[]).push([[486],{95502:function(e,r,t){"use strict";var n=t(36552),u=(t(93236),t(62086));r.Z=function(e){var r=e.modalVisible,t=e.onCancel;return(0,u.jsx)(n.Z,{destroyOnClose:!0,title:"新建",width:"80vw",open:r,onCancel:function(){return t()},footer:null,children:e.children})}},64602:function(e,r,t){"use strict";t.r(r);var n=t(15558),u=t.n(n),a=t(48305),o=t.n(a),s=t(90228),i=t.n(s),c=t(26068),l=t.n(c),p=t(87999),d=t.n(p),f=t(95502),v=t(96349),h=t(14449),m=t(76149),x=t(37598),y=t(98451),w=t(61201),b=t(96296),j=t(4262),g=t(62834),k=t(83051),P=t(51077),Z=t(65004),C=t(93236),I=t(62086),q=v.Z.UserController,T=q.addUser,U=q.queryUserList,E=q.deleteUser,S=function(){var e=d()(i()().mark((function e(r){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ZP.loading("正在添加"),e.prev=1,e.next=4,T(l()({},r));case 4:return t(),g.ZP.success("添加成功"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),t(),g.ZP.error("添加失败请重试！"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}(),L=function(){var e=d()(i()().mark((function e(r){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.ZP.loading("正在删除"),r){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,E({userId:(null===(n=r.find((function(e){return e.id})))||void 0===n?void 0:n.id)||""});case 6:return t(),g.ZP.success("删除成功，即将刷新"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),t(),g.ZP.error("删除失败，请重试"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(r){return e.apply(this,arguments)}}();r.default=function(){var e=(0,C.useState)(!1),r=o()(e,2),t=r[0],n=r[1],a=(0,C.useRef)(),s=(0,C.useState)(),c=o()(s,2),p=c[0],v=c[1],g=(0,C.useState)([]),q=o()(g,2),T=q[0],E=q[1],_=[{title:"名称",dataIndex:"name",formItemProps:{rules:[{required:!0}]}},{title:"网址",dataIndex:"url",valueType:"text",formItemProps:{rules:[{required:!0}]}},{title:"描述",dataIndex:"desc",valueType:"textarea"},{title:"分组",dataIndex:"group",fieldProps:function(){return{mode:"multiple"}},valueEnum:{0:{text:"男",status:"MALE"},1:{text:"女",status:"FEMALE"}}},{title:"标签",renderFormItem:function(){return(0,I.jsx)(h.u,{name:"tags",initialValue:[],rules:[{validator:(e=d()(i()().mark((function e(r,t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("validator ProFormList",r,t),!(t.length>1&&t.every((function(e){return e.type}))&&new Set(t.map((function(e){return e.type}))).size!==t.length)){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("标签分类不能重复")));case 3:return e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)}))),function(r,t){return e.apply(this,arguments)})}],children:(0,I.jsxs)(m.UW,{children:[(0,I.jsx)(x.Z,{name:"type",formItemProps:{className:"w-40"},options:[{value:"chapter",label:"盖章后生效2222222"},{value:"none",label:"不生效1"}],width:"md",label:"标签类型",validateTrigger:["onChange","onBlur"],rules:[{required:!0}]},"type"),(0,I.jsx)(x.Z,{name:"list",mode:"multiple",fieldProps:{optionFilterProp:"label",filterOption:function(e,r){var t;return(null!==(t=null==r?void 0:r.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},options:[{value:"chapter",label:"盖章后生效"},{value:"none",label:"不生效"}].concat(u()(new Array(36).fill(0).map((function(e,r){return{value:"dg"+(36-r),label:"bef"+r}})))),width:"md",label:"标签",validateTrigger:["onChange","onBlur"],rules:[{required:!0}]},"list")]},"group")});var e}},{title:"操作",dataIndex:"option",valueType:"option",render:function(){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("a",{children:"配置"}),(0,I.jsx)(k.Z,{type:"vertical"}),(0,I.jsx)("a",{href:"",children:"订阅警报"})]})}}];return(0,I.jsxs)(y._z,{children:[(0,I.jsx)(w.Z,{headerTitle:"查询表格",actionRef:a,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,I.jsx)(P.ZP,{type:"primary",onClick:function(){return n(!0)},children:"新建"},"1")]},request:function(){var e=d()(i()().mark((function e(r,t,n){var u,a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(l()(l()({},r),{},{sorter:t,filter:n}));case 2:return u=e.sent,a=u.data,o=u.success,e.abrupt("return",{data:(null==a?void 0:a.list)||[],success:o});case 6:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),columns:_,rowSelection:{onChange:function(e,r){return E(r)}}}),(null==T?void 0:T.length)>0&&(0,I.jsxs)(b.S,{extra:(0,I.jsxs)("div",{children:["已选择"," ",(0,I.jsx)("a",{style:{fontWeight:600},children:T.length})," ","项  "]}),children:[(0,I.jsx)(P.ZP,{onClick:d()(i()().mark((function e(){var r,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(T);case 2:E([]),null===(r=a.current)||void 0===r||null===(t=r.reloadAndRest)||void 0===t||t.call(r);case 4:case"end":return e.stop()}}),e)}))),children:"批量删除"}),(0,I.jsx)(P.ZP,{type:"primary",children:"批量审批"})]}),(0,I.jsx)(f.Z,{onCancel:function(){return n(!1)},modalVisible:t,children:(0,I.jsx)(w.Z,{onSubmit:function(){var e=d()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("value",r),e.next=3,S(r);case 3:e.sent&&(n(!1),a.current&&a.current.reload());case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:_})}),(0,I.jsx)(Z.Z,{width:600,open:!!p,onClose:function(){v(void 0)},closable:!1,children:(null==p?void 0:p.name)&&(0,I.jsx)(j.vY,{column:2,title:null==p?void 0:p.name,request:d()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:p||{}});case 1:case"end":return e.stop()}}),e)}))),params:{id:null==p?void 0:p.name},columns:_})})]})}},96349:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var n={};t.r(n),t.d(n,{addUser:function(){return f},deleteUser:function(){return w},getUserDetail:function(){return h},modifyUser:function(){return x},queryUserList:function(){return p}});var u=t(90228),a=t.n(u),o=t(26068),s=t.n(o),i=t(87999),c=t.n(i),l=t(40637);function p(e,r){return d.apply(this,arguments)}function d(){return(d=c()(a()().mark((function e(r,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queryUserList",s()({method:"GET",params:s()({},r)},t||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,r){return v.apply(this,arguments)}function v(){return(v=c()(a()().mark((function e(r,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/user",s()({method:"POST",headers:{"Content-Type":"application/json"},data:r},t||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,r){return m.apply(this,arguments)}function m(){return(m=c()(a()().mark((function e(r,t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.userId,e.abrupt("return",(0,l.request)("/api/v1/user/".concat(n),s()({method:"GET",params:s()({},r)},t||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r,t){return y.apply(this,arguments)}function y(){return(y=c()(a()().mark((function e(r,t,n){var u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.userId,e.abrupt("return",(0,l.request)("/api/v1/user/".concat(u),s()({method:"PUT",headers:{"Content-Type":"application/json"},params:s()({},r),data:t},n||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r){return b.apply(this,arguments)}function b(){return(b=c()(a()().mark((function e(r,t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.userId,e.abrupt("return",(0,l.request)("/api/v1/user/".concat(n),s()({method:"DELETE",params:s()({},r)},t||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={UserController:n}},38498:function(e,r,t){var n=t(78770);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},20698:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},91162:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},15558:function(e,r,t){var n=t(38498),u=t(20698),a=t(31479),o=t(91162);e.exports=function(e){return n(e)||u(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports}}]);